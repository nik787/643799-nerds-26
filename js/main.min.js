"use strict";var popupOpen=document.querySelector(".information__button"),popup=document.querySelector(".popup"),popupClose=popup.querySelector(".popup__close"),popupInput=popup.querySelectorAll("input, textarea"),popupLogin=popup.querySelector("#name"),popupEmail=popup.querySelector("#email"),popupText=popup.querySelector("#text-area"),popupForm=popup.querySelector(".popup__form"),popupSubmit=popup.querySelector(".popup__submit"),isStorageSupport=!0,loginStorage="",emailStorage="";try{loginStorage=localStorage.getItem("login"),emailStorage=localStorage.getItem("email")}catch(a){isStorageSupport=!1}popupOpen.addEventListener("click",openPopup),popupClose.addEventListener("click",closePopup),popupForm.addEventListener("submit",valid);function valid(a){for(var b=function(b){var c=popupInput[b];c.setAttribute("required",!0),c.validity.valid?isStorageSupport&&(localStorage.setItem("login",popupLogin.value),localStorage.setItem("email",popupEmail.value)):(popupError(),a.preventDefault(),popupSubmit.addEventListener("click",function(){c.validity.valid||popupError()}))},c=0;c<popupInput.length;c++)b(c)}function popupOpenAnimate(){popup.classList.add("popup--open-animate"),setTimeout(function(){popup.classList.remove("popup--open-animate")},2e3)}function popupError(){popup.classList.add("popup--error"),setTimeout(function(){popup.classList.remove("popup--error")},2e3)}function openPopup(a){a.preventDefault(),popup.classList.add("popup--open"),popupOpenAnimate(),loginStorage&&emailStorage?popupText.focus():loginStorage?popupEmail.focus():popupLogin.focus(),popupLogin.value=loginStorage,popupEmail.value=emailStorage,window.addEventListener("keydown",function(a){27===a.keyCode&&popup.classList.contains("popup--open")&&(a.preventDefault(),closePopup(a))})}function closePopup(a){a.preventDefault(),popup.classList.add("popup--close"),setTimeout(function(){popup.classList.remove("popup--open"),popup.classList.remove("popup--close")},800),popupOpen.focus()}ymaps.ready(function(){var a=new ymaps.Map("map",{center:[59.938872,30.322617],zoom:18,controls:[],type:"yandex#map"},{searchControlProvider:"yandex#search"},{suppressMapOpenBlock:!0}),b=ymaps.templateLayoutFactory.createClass("<div style=\"color: #FFFFFF; font-weight: bold;\">$[properties.iconContent]</div>"),c=new ymaps.Placemark([59.938631,30.323055],{hintContent:"191186, \u0421\u0430\u043D\u043A\u0442-\u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433,\n          \u0443\u043B. \u0411. \u041A\u043E\u043D\u044E\u0448\u0435\u043D\u043D\u0430\u044F, \u0434. 19/8"},{iconLayout:"default#image",iconImageHref:"img/map-marker.png",iconImageSize:[231,190],iconImageOffset:[-50,-200]});a.behaviors.disable(["rightMouseButtonMagnifier","scrollZoom"]),a.geoObjects.add(c)});
